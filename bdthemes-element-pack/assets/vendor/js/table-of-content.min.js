!function(a){a.fn.TableOfContent=function(t){if(t=void 0===t?{}:t,this.isinit=void 0!==this.isinit&&s.isinit,"destroy"==t)return this.isinit=!1,this.empty(),this.off("activate.bs.scrollspy"),a(body).removeAttr("data-spy"),this;this.options=a.extend({},{tH:2,bH:6,genIDs:!0,offset:0,ulClassNames:"hidden-print",testing:!1},this.options,t);var s=this;function r(t){return a("<div></div>").text(t).html()}function i(){for(var t=[],i=s.options.tH;i<=s.options.bH;i++)t.push("H"+i);return a(t.join(","))}function n(){i().prop("id",function(){return""===a(this).prop("id")?a(this).prop("tagName")+function(){var t;function i(){t=Math.floor(900*Math.random())+100}for(i();0<=s.rands.indexOf(t);)i();return s.rands.push(t),t}():a(this).prop("id")})}function e(){var t=s.tree;return a("H"+s.options.tH).each(function(){t[a(this).prop("id")]={dstext:r(a(this).text()),jqel:a(this)}}),s.options.tH+1<=s.options.bH&&function t(i){for(var n in i)if("dstext"!=n&&"jqel"!=n){var e=Number(a("#"+n).prop("tagName").replace("H",""));if(e>=s.options.bH)return!1;a("#"+n).nextUntil("H"+e).filter("H"+(e+1)).each(function(){i[n][a(this).prop("id")]={dstext:r(a(this).text()),jqel:a(this)}}),e<s.options.bH&&t(i[n])}}(t),t}function o(){var n=a('<ul class="bdt-nav bdt-nav-default bdt-nav-parent-icon '+s.options.ulClassNames+'" bdt-scrollspy-nav="closest: li; scroll: true; offset: '+s.options.offset+'" bdt-nav></ul>');return s.append(n),a.each(s.tree,function(t){var i='<li id="dsli'+t+'"><a href="#'+t+'">'+s.tree[t].dstext+"</a></li>";n.append(i),function t(i){if(Object.keys(i).length<3)return!1;var n=a("#dsli"+i.jqel.prop("id"));var e=a("<ul class='bdt-nav-sub'></ul>");n.append(e);for(var s in i)if("dstext"!=s&&"jqel"!=s){var r=i[s];e.append('<li id="dsli'+s+'" class="bdt-parent"><a href="#'+s+'">'+r.dstext+"</a></li>"),t(i[s])}}(s.tree[t])}),s}return this.tree={},!(this.rands=[])===s.isinit?(s.options.genIDs?n():function(){var t=0;if(i().each(function(){if(""===a(this).prop("id"))t++;else if(1<a('[id="'+a(this).prop("id")+'"]').length)throw new Error("TableOfContent: Error! Duplicate id "+a(this).prop("id"))}),0<t)throw new Error("TableOfContent: Not all headers have ids and genIDs: false.")}(),s.options.testing&&i().append(function(){return" ("+a(this).prop("tagName")+", "+a(this).prop("id")+")"}),e(),o(),s.isinit=!0):(e(),o()),s}}(jQuery);